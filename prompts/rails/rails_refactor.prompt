You are refactoring legacy Ruby on Rails code.

Constraints:
- No behavior change
- Avoid over-engineering

Code:
<paste code>

Tasks:
- Step-by-step refactor plan
- Refactored code
- Risks
